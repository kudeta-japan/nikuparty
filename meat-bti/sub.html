<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Meat BTIï½œ20å•ã§ã‚ã‹ã‚‹â€œã‚ãªãŸã®éƒ¨ä½ã‚¿ã‚¤ãƒ—â€</title>
<meta name="description" content="20å•ãƒ»æ‰€è¦1ã€œ2åˆ†ã€‚è‚‰å¥½ãã®ãŸã‚ã®æ€§æ ¼Ã—éƒ¨ä½ã‚¿ã‚¤ãƒ—è¨ºæ–­ã€Meat BTIã€ã€‚ãŠã™ã™ã‚éƒ¨ä½ã¨ç›¸æ€§No.1ã‚¿ã‚¤ãƒ—ã‚’è¡¨ç¤ºã€‚">
<meta name="theme-color" content="#0b0a0a">
<style>
  :root{
    --bg:#0b0a0a; --panel:#141111; --ink:#fff9ef; --muted:#ccbfae; --bd:#2a2421;
    --cheese:#ffd966; --tomato:#ff6b4a; --basil:#3fbf7b; --wine:#9b4a8f;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);
    font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif;
    letter-spacing:.02em;line-height:1.65}
  img{max-width:100%;display:block}
  a{color:inherit;text-decoration:none}
  .container{width:min(960px,92vw);margin:0 auto;padding:20px 0}

  header{position:sticky;top:0;z-index:10;background:rgba(11,10,10,.7);
    backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--bd)}
  .nav{display:flex;align-items:center;gap:10px;height:56px}
  .logo{width:28px;height:28px;border-radius:10px;background:conic-gradient(from 140deg,var(--cheese),var(--tomato));display:grid;place-items:center}
  .brand{font-weight:900}

  .hero{padding:18px 0 8px}
  .eyebrow{display:inline-flex;gap:8px;align-items:center;background:rgba(255,232,137,.14);border:1px solid #3a2d0d;color:#ffe9b0;padding:6px 10px;border-radius:999px;font-size:12px}
  h1{font-size:clamp(22px,5.6vw,36px);margin:10px 0 6px}
  .lead{color:var(--muted);margin:0}

  .card{background:var(--panel);border:1px solid var(--bd);border-radius:16px;padding:16px}
  .q{border:1px solid #2a2421;border-radius:14px;padding:14px;margin:12px 0;background:#161211}
  .q h3{margin:0 0 8px;font-size:16px}
  .scale{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
  .opt{position:relative}
  .opt input{position:absolute;inset:0;opacity:0}
  .opt label{display:block;text-align:center;border:1px solid #3a2e2a;border-radius:10px;padding:10px 6px;font-size:13px;color:#e8dcc9;cursor:pointer;background:#120e0c}
  .opt input:checked + label{border-color:#f7c84a;box-shadow:0 0 0 2px rgba(247,200,74,.25) inset}
  .ends{display:flex;justify-content:space-between;color:#a99686;font-size:12px;margin-top:6px}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .btn{appearance:none;border:1px solid var(--bd);background:#1a1513;color:var(--ink);
    padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,var(--cheese),#f7c84a);color:#2a1e0b;border:none}
  .btn.ghost{background:#120e0c}
  .muted{color:#a99686}

  .result{display:none;margin-top:16px}
  .result h2{margin:0 0 8px}
  .badge{display:inline-flex;align-items:center;gap:8px;background:#1a1513;border:1px solid var(--bd);padding:6px 10px;border-radius:999px;font-size:12px}
  .flex{display:grid;grid-template-columns:1fr;gap:16px}
  @media(min-width:860px){.flex{grid-template-columns:1fr .9fr}}
  .heroimg{width:100%;border-radius:14px;border:1px solid var(--bd);background:#0f0c0a}

  .kv{display:grid;grid-template-columns:80px 1fr;gap:12px;align-items:center}
  .kv img{width:80px;height:80px;object-fit:contain;border-radius:14px;background:#0f0c0a;border:1px solid var(--bd)}
  .kv .tt{font-weight:900;font-size:20px}
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}

  footer{color:#a99686;text-align:center;padding:24px 0;border-top:1px solid var(--bd);margin-top:24px}
</style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="logo">ğŸ§€</div><div class="brand">Meat BTI</div>
  </div>
</header>

<main class="container">
  <section class="hero">
    <span class="eyebrow">20å•ãƒ»æ‰€è¦1ã€œ2åˆ†</span>
    <h1>ã‚ãªãŸã®â€œéƒ¨ä½ã‚¿ã‚¤ãƒ—â€ã¨ç›¸æ€§No.1ã‚’è¨ºæ–­</h1>
    <p class="lead">å›ç­”ã¯6æ®µéšã€‚ç›´æ„Ÿã§é¸ã‚“ã§OKã€‚</p>
  </section>

  <section id="quiz" class="card">
    <form id="form">
      <!-- Qs will be injected by JS -->
      <div id="questions"></div>
      <div class="actions">
        <button type="button" id="reset" class="btn ghost">ãƒªã‚»ãƒƒãƒˆ</button>
        <button type="submit" id="submit" class="btn primary">çµæœã‚’è¦‹ã‚‹</button>
        <span id="progress" class="muted"></span>
      </div>
    </form>
  </section>

  <section id="result" class="result card">
    <div class="flex">
      <div>
        <div class="kv">
          <img id="typeImg" alt="">
          <div>
            <div class="tt" id="typeName">â€”</div>
            <div id="typeNick" class="muted" style="margin-top:2px"></div>
          </div>
        </div>
        <p id="typeCatch" style="margin:12px 0 8px"></p>
        <div id="typeTips" class="chips"></div>
        <div style="margin-top:12px">
          <span class="badge">ç›¸æ€§ No.1</span>
          <div style="margin-top:8px;font-weight:900" id="bestMatch">â€”</div>
          <div class="muted" id="bestWhy" style="margin-top:4px"></div>
        </div>
        <div class="actions" style="margin-top:14px">
          <button class="btn ghost" id="copy">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
          <a class="btn" href="./" id="back">LPã«æˆ»ã‚‹</a>
        </div>
      </div>
      <div>
        <img class="heroimg" id="viz" alt="è¨ºæ–­ã‚¤ãƒ¡ãƒ¼ã‚¸">
        <p class="muted" style="margin-top:8px">â€»ç”»åƒã¯ã‚¿ã‚¤ãƒ—ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ï¼ˆãƒ’ãƒ¬ï¼ã‚¿ãƒ³ï¼ãƒŸã‚¹ã‚¸ã¯ã‚­ãƒ£ãƒ©ç”»åƒã‚’è¡¨ç¤ºï¼‰ã€‚</p>
      </div>
    </div>
  </section>
</main>

<footer>Â© <span id="y"></span> Meat BTI</footer>

<script>
  document.getElementById('y').textContent = new Date().getFullYear();

  // =============== è¨­å®š ===============
  // 20å•ï¼šå·¦(1)ã€œå³(6)ã®6æ®µéš
  const QUESTIONS = [
    // è»¸: rich(è„‚) / lean(èµ¤èº«), tender(æŸ”) / chewy(å™›ã¿), classic / adventure, pace(slow/fast), social(deep/party)
    { id:'q1',  a:'æœ€åˆã®ä¸€çš¿ã¯ ã•ã£ã±ã‚Šå¡©ã§ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—', b:'æœ€åˆã‹ã‚‰åç‰©ã®ã‚³ã‚¯ã§è¯ã‚„ã‹ã«', axis:{rich:+1, classic:+0.6} },
    { id:'q2',  a:'ç„¼ãåŠ æ¸›ã¯ãƒ¬ã‚¢å¯„ã‚Š', b:'ãƒŸãƒ‡ã‚£ã‚¢ãƒ ã€œã—ã£ã‹ã‚Š', axis:{tender:+0.3, pace:-0.2} },
    { id:'q3',  a:'å‘³ä»˜ã‘ã¯å¡©ãŒåŸºæœ¬', b:'ç‰¹è£½ã‚½ãƒ¼ã‚¹ã§ã—ã£ã‹ã‚Šå‘³', axis:{classic:+0.4, rich:+0.6} },
    { id:'q4',  a:'ã¨ã‚ã‘ã‚‹æŸ”ã‚‰ã‹ã•ãŒå¥½ã', b:'å™›ã‚€ã»ã©æ—¨ã„é£Ÿæ„ŸãŒå¥½ã', axis:{tender:+1} },
    { id:'q5',  a:'ä¼šè©±ã‚’ã˜ã£ãã‚Šæ¥½ã—ã‚€ãƒšãƒ¼ã‚¹', b:'ãƒ†ãƒ³ãƒã‚ˆãå›ã—ã¦ã„ã', axis:{pace:-1, social:-0.4} },
    { id:'q6',  a:'å°‘é‡Ã—å¤šç¨®é¡ã‚’ã‚·ã‚§ã‚¢', b:'å¥½ããªçš¿ã‚’ã—ã£ã‹ã‚Š', axis:{classic:+0.2, pace:+0.2} },
    { id:'q7',  a:'å®šç•ªã‚’ã¾ãšæŠ¼ã•ãˆã‚‹', b:'æ–°ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚å°‘ã—å†’é™º', axis:{classic:-1} },
    { id:'q8',  a:'ç´ æã®é¦™ã‚Šã‚’æ´»ã‹ã™é™ã‹ãªæ¼”å‡º', b:'ç›®ã®å‰ã§ç‡ƒãˆã‚‹/æ¹¯æ°—ãŒä¸ŠãŒã‚‹æ¼”å‡º', axis:{social:+0.8, classic:-0.4} },
    { id:'q9',  a:'ä¹¾æ¯ã¯ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°/ãƒã‚¤ãƒœãƒ¼ãƒ«', b:'èµ¤ãƒ¯ã‚¤ãƒ³ã‚„æ¿ƒã„ã‚ã‚«ã‚¯ãƒ†ãƒ«', axis:{rich:+0.5, pace:+0.2} },
    { id:'q10', a:'è»½ã‚ã‚’ã“ã¾ã‚ã«', b:'å¤§ã¶ã‚Šã§æº€è¶³é‡è¦–', axis:{pace:+0.4, rich:+0.3} },
    { id:'q11', a:'èµ¤èº«å¯„ã‚ŠãŒå¥½ã¿', b:'ã‚µã‚·ã®å…¥ã‚ŠãŒå¥½ã', axis:{rich:+1} },
    { id:'q12', a:'ã€†ã¯è»½ãã‚ã£ã•ã‚Š', b:'ãƒ‡ã‚¶ãƒ¼ãƒˆ/ã—ã£ã‹ã‚Šç³»ã‚‚', axis:{rich:+0.3} },
    { id:'q13', a:'è½ã¡ç€ã„ãŸå¸­ã§è…°ã‚’æ®ãˆã‚‹', b:'ä¼šå ´ä¸­å¤®ãªã©è³‘ã‚„ã‹ãªå¸­', axis:{social:+1, pace:+0.4} },
    { id:'q14', a:'å†™çœŸã¯å°‘ã—ã ã‘', b:'æ˜ ãˆã‚’ç‹™ã£ã¦ã—ã£ã‹ã‚Šæ’®ã‚‹', axis:{social:+0.6, classic:-0.2} },
    { id:'q15', a:'æ·±ã‚ã®å¯¾è©±ãŒå¥½ã', b:'æ˜ã‚‹ãåºƒãç››ã‚Šä¸Šã’ãŸã„', axis:{social:+1} },
    { id:'q16', a:'ç„¼ãæ‹…å½“ã¯ä»»ã›ã¦é™ã‹ã«æ•´ãˆã‚‹', b:'ã¿ã‚“ãªã§ãƒ¯ã‚¤ãƒ¯ã‚¤ç„¼ã', axis:{social:+0.6, pace:+0.3} },
    { id:'q17', a:'ã»ã®ã‹ãªé¦™ã‚Šã§ä¸Šå“ã«', b:'é¦™ã°ã—ããƒ‘ãƒ³ãƒã‚’åŠ¹ã‹ã›ãŸã„', axis:{rich:+0.4, classic:-0.2} },
    { id:'q18', a:'è–„åˆ‡ã‚Šã‚„ç¹Šç´°ãªç«å…¥ã‚ŒãŒå¥½ã', b:'åšåˆ‡ã‚Šã§å­˜åœ¨æ„Ÿé‡è¦–', axis:{tender:+0.6, pace:+0.2} },
    { id:'q19', a:'é‡ã‚ˆã‚Šè³ªã«ã“ã ã‚ã‚‹', b:'ã‚³ã‚¹ãƒ‘ã‚‚å¤§äº‹', axis:{classic:+0.2, pace:+0.2} },
    { id:'q20', a:'äºŒæ¬¡ä¼šã¯è…°ã‚’æ®ãˆã¦è©±ã—ãŸã„', b:'å›éŠã—ã¦ãƒã‚·ã‚´ã—ãŸã„', axis:{pace:+0.8, social:+0.6} },
  ];

  // éƒ¨ä½ã‚¿ã‚¤ãƒ—ã®ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆ-1..+1ï¼‰
  const CUTS = {
    "ãƒ’ãƒ¬":         {vec:{rich:-0.8,tender:+0.9,classic:+0.8,pace:-0.5,social:-0.6},
                     nick:"é™ã‹ãªä¸»å½¹", catch:"ç„¡é§„ãªãä¸Šå“ã€èŠ¯ãŒå¼·ã„èµ¤èº«æ´¾ã€‚",
                     tips:["æœ€åˆã¯å¡©ã§æ•´ãˆã‚‹","ç›¸æ‰‹ã®å¥½ã¿ã‚’æ‹¾ã£ã¦æ¬¡ã®ä¸€çš¿ã¸","ä¹¾æ¯ã¯è»½ã‚„ã‹ã«"]},
    "ã‚¿ãƒ³":         {vec:{rich:-0.2,tender:-0.5,classic:+0.4,pace:+0.8,social:+0.9},
                     nick:"å ´ã‚’ã»ãã™ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼", catch:"ã‚­ãƒ¬ã¨ãƒ†ãƒ³ãƒã§æ˜ã‚‹ãå›ã™ã€‚",
                     tips:["ã‚¿ãƒ³å¡©â†’èµ¤èº«ã®é»„é‡‘ãƒ«ãƒ¼ãƒˆ","å°çš¿ã‚·ã‚§ã‚¢ã§ä¼šè©±ã‚’å›ã™","ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆã§ç››ã‚Šä¸Šã’ã‚‹"]},
    "ã‚¤ãƒãƒœ":       {vec:{rich:+0.2,tender:+0.2,classic:+0.5,pace:-0.2,social:-0.2},
                     nick:"èª¿å¾‹ä¸Šæ‰‹ã®ãƒãƒ©ãƒ³ã‚µãƒ¼", catch:"ç«¯æ­£ã«ã¾ã¨ã‚ã‚‹ä½™éŸ»å¥½ãã€‚",
                     tips:["ä¼¼ãŸå¥½ã¿ã§æ¯”è¼ƒé£Ÿã¹","ç«å…¥ã‚Œå¾®èª¿æ•´ã‚’ææ¡ˆ","ç· ã‚ã¯è»½ã‚ã§ä½™ç™½ã‚’æ®‹ã™"]},
    "ãƒ©ãƒ³ãƒ—":       {vec:{rich:-0.3,tender:-0.2,classic:-0.5,pace:+0.2,social:+0.3},
                     nick:"å°ã•ãªå†’é™ºå®¶", catch:"èµ¤èº«ã§æ–°ã—ã„å®šç•ªã¥ãã‚Šã€‚",
                     tips:["å°‘é‡Ã—å¤šçš¿ã§ãƒŸãƒ‹å®Ÿé¨“","å‰µä½œ1çš¿ã‚’ä¼šè©±ã®ãƒã‚¿ã«","ç„¼ãæ‹…å½“ã§è¦³å¯Ÿï¼†è©±é¡Œ"]},
    "ãƒªãƒ–ãƒ­ãƒ¼ã‚¹":   {vec:{rich:+0.6,tender:+0.5,classic:+0.8,pace:+0.2,social:+0.1},
                     nick:"å®‰å¿ƒæ„Ÿã®ãƒªãƒ¼ãƒ€ãƒ¼", catch:"ç‹é“ãƒªãƒƒãƒã§æº€è¶³åº¦é‡è¦–ã€‚",
                     tips:["åç‰©â†’åç‰©ã§æ®µå–ã‚Šè‰¯ã","å¸­æ›¿ãˆã‚„ä¼šè¨ˆã‚’ãƒªãƒ¼ãƒ‰","ä½“é¨“ã‚’æ¿ƒãã€å†™çœŸã¯æ§ãˆã‚"]},
    "ã‚µãƒ¼ãƒ­ã‚¤ãƒ³":   {vec:{rich:+0.9,tender:+0.6,classic:-0.3,pace:+0.8,social:+0.8},
                     nick:"é­…ã›æ–¹åäºº", catch:"æ¿ƒåšã¨â€œæ˜ ãˆâ€ã§å ´ã®ä¸­å¿ƒã«ã€‚",
                     tips:["ãƒ•ãƒ©ãƒ³ãƒ™ç­‰ã®æ¼”å‡ºã§æ‹æ‰‹","ä¹¾æ¯ã®éŸ³é ­ã§æ˜ã‚‹ãé–‹å§‹","éš£å¸­ã¨ã‚‚è»½ãä¹¾æ¯"]},
    "ã‚¶ãƒ–ãƒˆãƒ³":     {vec:{rich:+0.8,tender:+0.8,classic:+0.3,pace:-0.3,social:-0.3},
                     nick:"ã¨ã‚ã‘ã‚‹èªã‚Šéƒ¨", catch:"ã—ã£ã¨ã‚Šæ¿ƒåšã€å°‘äººæ•°ã§ã˜ã£ãã‚Šã€‚",
                     tips:["å°‘é‡é«˜æº€è¶³ã‚’ææ¡ˆ","ä¼‘ã¾ã›æ™‚é–“ã‚’å¤§åˆ‡ã«","æ·±ã‚ã®è³ªå•ã‚’1ã¤ã ã‘"]},
    "ã‚«ãƒ«ãƒ“":       {vec:{rich:+0.9,tender:+0.3,classic:-0.4,pace:+0.9,social:+0.9},
                     nick:"ã”è¤’ç¾ã‚¨ãƒ³ã‚¿ãƒ¡", catch:"ç”˜æ—¨ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ã§å·»ãè¾¼ã‚€ã€‚",
                     tips:["åºç›¤ã§â€œã¿ã‚“ãªã®ä¸€å£â€ã‚«ãƒ«ãƒ“","å†™çœŸ/å‹•ç”»ã‚’æ’®ã£ã¦ã‚·ã‚§ã‚¢","æº€è¶³æ´¾ã®å¸Œæœ›ã‚’æ‹¾ã£ã¦å…ˆå°"]},
    "ãƒãƒ©ãƒŸ":       {vec:{rich:-0.1,tender:-0.1,classic:+0.1,pace:+0.9,social:+0.6},
                     nick:"ãƒ†ãƒ³ãƒã®å¸ä»¤å¡”", catch:"èºå‹•æ„Ÿã‚ã‚‹èµ¤èº«ã€ã‚¹ãƒ”ãƒ¼ãƒ‰å‹è² ã€‚",
                     tips:["å›è»¢ã‚’ä¸Šã’ã¦ä¼šè©±ã®é–“ã‚’ä½œã‚‰ãªã„","ç„¼ãå°ã®ç®¡ç†å½¹ã§æ´»èº","é£²ã¿ã™ãæ³¨æ„ã§ç¬‘é¡”ã‚­ãƒ¼ãƒ—"]},
    "ã‚«ã‚¤ãƒãƒŸ":     {vec:{rich:+0.3,tender:+0.2,classic:+0.2,pace:+0.4,social:+0.4},
                     nick:"è»½ãƒªãƒƒãƒã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ã‚¿ãƒ¼", catch:"å¡©ã‚‚ã‚¿ãƒ¬ã‚‚â€œã¡ã‚‡ã†ã©è‰¯ã„â€ã€‚",
                     tips:["å¡©â†’ã‚¿ãƒ¬ã®é †åºã§ãƒ¡ãƒªãƒãƒª","è»½ã„ç· ã‚ã§ä½™ç™½ã‚’æ®‹ã™","ç›¸æ‰‹ã®å¾—æ„ãƒˆãƒ¼ã‚¯ã‚’æŒ¯ã‚‹"]},
    "ãƒŸã‚¹ã‚¸":       {vec:{rich:+0.7,tender:+0.9,classic:+0.5,pace:-0.4,social:-0.4},
                     nick:"å¯¡é»™ãªå¯©ç¾å®¶", catch:"å£ã©ã‘ä¸Šå“ã€‚ä¸å¯§ãªæ‰€ä½œãŒé­…åŠ›ã€‚",
                     tips:["æ§ãˆã‚ç«å…¥ã‚Œã§é¦™ã‚Šã‚’å…±æœ‰","å°å£°ã®ãƒ„ãƒƒã‚³ãƒŸã§è·é›¢ã‚’ç¸®ã‚ã‚‹","ç”˜ã‚ã¯é‡ã‚’çµã£ã¦ææ¡ˆ"]},
    "ã‚·ãƒ£ãƒˆãƒ¼ãƒ–ãƒªã‚¢ãƒ³": {vec:{rich:-0.2,tender:+1,classic:+0.9,pace:-0.6,social:-0.6},
                     nick:"ç‰¹é¸ã®ä¸€ç‚¹é›†ä¸­", catch:"â€œé‡ã‚ˆã‚Šè³ªâ€ã§é™ã‹ã«æ·±ãã€‚",
                     tips:["è³ªé‡è¦–ã®è»¸ã‚’è¦‹ã›ã‚‹","é™ã‹ãªå´ã®å¸­ã‚’é¸ã¶","ãƒ‡ã‚¶ãƒ¼ãƒˆå‰ã«æ¬¡å›ã®ç´„æŸã‚’"]},
  };

  // ç”»åƒï¼ˆç”¨æ„ãŒã‚ã‚‹ã‚‚ã®ã®ã¿ï¼‰
  const TYPE_IMAGES = {
    "ãƒ’ãƒ¬": "hire.png",
    "ã‚¿ãƒ³": "tan.png",
    "ãƒŸã‚¹ã‚¸": "misuji.png"
  };

  // =============== è³ªå•UIç”Ÿæˆ ===============
  const qWrap = document.getElementById('questions');
  function makeQuestion(q, idx){
    const el = document.createElement('div');
    el.className = 'q';
    el.innerHTML = `
      <h3>Q${idx+1}. ${q.a} â†â†’ ${q.b}</h3>
      <div class="scale">
        ${[1,2,3,4,5,6].map((n,i)=>`
          <div class="opt">
            <input type="radio" name="${q.id}" id="${q.id}-${i}" value="${i}">
            <label for="${q.id}-${i}">${n}</label>
          </div>`).join('')}
      </div>
      <div class="ends"><span>å·¦ã«è¿‘ã„</span><span>å³ã«è¿‘ã„</span></div>
    `;
    return el;
  }
  QUESTIONS.forEach((q,i)=> qWrap.appendChild(makeQuestion(q,i)));

  // é€²æ—
  const progress = document.getElementById('progress');
  function updateProgress(){
    const answered = QUESTIONS.filter(q => document.querySelector(`input[name="${q.id}"]:checked`)).length;
    progress.textContent = `å›ç­”çŠ¶æ³ï¼š${answered}/${QUESTIONS.length}`;
  }
  qWrap.addEventListener('change', updateProgress);
  updateProgress();

  // =============== è¨ˆç®— ===============
  // 6æ®µéšã‚’ -3,-2,-1,+1,+2,+3 ã«å¤‰æ›
  function valToScore(v){ const i=parseInt(v,10); return i<3 ? (-3+i) : (i-2); }

  function vectorAdd(a,b){
    const out = {...a};
    for(const k in b){ out[k] = (out[k]||0) + b[k]; }
    return out;
  }
  function vectorScale(a,s){
    const out={}; for(const k in a){ out[k]=a[k]*s; } return out;
  }
  function distance(a,b){
    let s=0; for(const k of ['rich','tender','classic','pace','social']){
      const d=(a[k]||0)-(b[k]||0); s+=d*d;
    } return Math.sqrt(s);
  }
  function normalize(v){
    const out={...v}; let max=0;
    for(const k in out){ max=Math.max(max, Math.abs(out[k])); }
    if(max===0) return out;
    for(const k in out){ out[k]/=max; }
    return out;
  }

  // ç›¸æ€§ã¯ã€ŒåŒãƒšãƒ¼ã‚¹ãƒ»åŒç¤¾äº¤æ€§ã€ã‚’é‡è¦–ã—ã¤ã¤ã€ãƒªãƒƒãƒ/é£Ÿæ„Ÿ/ã‚¯ãƒ©ã‚·ãƒƒã‚¯åº¦ã¯é©åº¦ã«è£œå®Œ
  function partnerIdealOf(user){
    return normalize({
      rich:   -user.rich * 0.7,
      tender: -user.tender * 0.7,
      classic: user.classic * 0.2,  // è¿‘ã™ããšé›¢ã‚Œã™ããš
      pace:    user.pace * 0.9,     // ã§ãã‚‹ã ã‘åŒã˜
      social:  user.social * 0.9    // ã§ãã‚‹ã ã‘åŒã˜
    });
  }

  function bestTypeFor(vec){
    let best=null, bestD=1e9;
    for(const name in CUTS){
      const d = distance(vec, CUTS[name].vec);
      if(d<bestD){ bestD=d; best=name; }
    }
    return best;
  }

  // =============== æå‡º ===============
  const form = document.getElementById('form');
  form.addEventListener('submit', (e)=>{
    e.preventDefault();

    // å›ç­”åé›†
    let userVec = {rich:0,tender:0,classic:0,pace:0,social:0};
    for(const q of QUESTIONS){
      const sel = document.querySelector(`input[name="${q.id}"]:checked`);
      if(!sel){ alert('æœªå›ç­”ã®è¨­å•ãŒã‚ã‚Šã¾ã™'); return; }
      const s = valToScore(sel.value) / 3; // -1..+1
      const contrib={};
      for(const k in q.axis){ contrib[k]= q.axis[k]*s; }
      userVec = vectorAdd(userVec, contrib);
    }
    userVec = normalize(userVec);

    // ãŠã™ã™ã‚éƒ¨ä½ï¼ˆ40%ï¼‰ï¼‹ ç›¸æ€§ï¼ˆ60%ï¼‰ã§ç·åˆ
    const cutOnly   = bestTypeFor(userVec);
    const partnerId = partnerIdealOf(userVec);
    const matchType = bestTypeFor(partnerId);

    // ç·åˆç‚¹ã§æœ€çµ‚ã‚¿ã‚¤ãƒ—ï¼ˆcutOnly ã‚’åŸºæœ¬ã«ï¼‰
    // ã“ã“ã§ã¯ â€œãŠã™ã™ã‚éƒ¨ä½â€ ã‚’ãã®ã¾ã¾æ¡ç”¨ã—ã€ç›¸æ€§ã¯åˆ¥æ ã§ No.1 è¡¨ç¤º
    const typeName = cutOnly;

    showResult(typeName, matchType, userVec, partnerId);
  });

  document.getElementById('reset').addEventListener('click', ()=>{
    form.reset(); updateProgress();
    document.getElementById('result').style.display = 'none';
    window.scrollTo({top:0, behavior:'smooth'});
  });

  // =============== çµæœæç”» ===============
  function showResult(typeName, matchType, userVec, partnerVec){
    const T = CUTS[typeName];
    document.getElementById('typeName').textContent = `ã‚ãªãŸã¯ã€Œ${typeName}ã€ã‚¿ã‚¤ãƒ—`;
    document.getElementById('typeNick').textContent = T.nick;
    document.getElementById('typeCatch').textContent = T.catch;

    // tips
    const tipsEl = document.getElementById('typeTips'); tipsEl.innerHTML='';
    T.tips.forEach(t=>{
      const s=document.createElement('span'); s.className='badge'; s.textContent='ğŸ½ ' + t; tipsEl.appendChild(s);
    });

    // image
    const img = document.getElementById('typeImg');
    const src = TYPE_IMAGES[typeName];
    if(src){ img.src = src; img.alt = typeName; }
    else { img.removeAttribute('src'); img.alt='No image'; img.style.background='#0f0c0a'; }

    // ç›¸æ€§
    document.getElementById('bestMatch').textContent = matchType;
    const why = [];
    if(Math.sign(partnerVec.pace)===Math.sign((CUTS[matchType].vec.pace)))  why.push('åŒã˜ãƒšãƒ¼ã‚¹æ„Ÿ');
    if(Math.sign(partnerVec.social)===Math.sign((CUTS[matchType].vec.social)))why.push('å¿ƒåœ°ã‚ˆã„è³‘ã‚„ã‹ã•/è½ã¡ç€ããŒåˆã†');
    if(Math.sign(partnerVec.rich)!==Math.sign((CUTS[matchType].vec.rich)))   why.push('å‘³ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Šã‚„ã™ã„');
    document.getElementById('bestWhy').textContent = why.length? 'ç†ç”±ï¼š' + why.join('ãƒ»') : 'ç›¸æ€§ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯å¥½ã€‚';

    // ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ï¼ˆç°¡æ˜“ãƒ¬ãƒ¼ãƒ€ãƒ¼ä»£æ›¿ï¼‰
    const v = CUTS[typeName].vec;
    const txt = `
      ã‚¿ã‚¤ãƒ—ï¼š${typeName}ï¼ˆ${CUTS[typeName].nick}ï¼‰
      rich:${v.rich.toFixed(1)} tender:${v.tender.toFixed(1)}
      classic:${v.classic.toFixed(1)} pace:${v.pace.toFixed(1)} social:${v.social.toFixed(1)}
    `.replace(/\s+/g,' ').trim();
    const canvas = document.createElement('canvas');
    canvas.width=960; canvas.height=540;
    const ctx = canvas.getContext('2d');
    ctx.fillStyle='#0f0c0a'; ctx.fillRect(0,0,canvas.width,canvas.height);
    // title
    ctx.fillStyle='#ffe6a8'; ctx.font='bold 28px system-ui'; ctx.fillText(`Meat BTI Result`, 24, 46);
    ctx.fillStyle='#fff9ef'; ctx.font='bold 36px system-ui'; ctx.fillText(typeName, 24, 100);
    ctx.font='20px system-ui'; ctx.fillStyle='#ccbfae'; ctx.fillText(CUTS[typeName].nick, 24, 130);
    // bars
    const axes=['rich','tender','classic','pace','social'];
    axes.forEach((k,i)=>{
      const val = Math.max(-1, Math.min(1, v[k]));
      const cx=24, cy=170+i*70;
      ctx.fillStyle='#ccbfae'; ctx.fillText(k, cx, cy);
      const x=130, y=cy-18, w=700, h=24;
      ctx.fillStyle='#201b18'; ctx.fillRect(x,y,w,h);
      ctx.fillStyle='#ffd966'; const len=(val+1)/2*w; ctx.fillRect(x,y,len,h);
    });
    document.getElementById('viz').src = canvas.toDataURL('image/png');

    document.getElementById('result').style.display='block';
    document.getElementById('result').scrollIntoView({behavior:'smooth'});
  }

  // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰
  document.getElementById('copy').addEventListener('click', async (e)=>{
    e.preventDefault();
    const t = document.getElementById('typeName').textContent + '\n' +
              document.getElementById('typeNick').textContent + '\n' +
              document.getElementById('typeCatch').textContent + '\n' +
              'ç›¸æ€§No.1ï¼š' + document.getElementById('bestMatch').textContent;
    try{ await navigator.clipboard.writeText(t); alert('çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ'); }
    catch{ alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ'); }
  });

  // Google Analyticsï¼ˆGA4ï¼‰
  (function(){
    const id = 'G-V39MNGQD';
    if(!id) return;
    const s = document.createElement('script');
    s.async = true; s.src = `https://www.googletagmanager.com/gtag/js?id=${id}`;
    document.head.appendChild(s);
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    window.gtag = gtag;
    gtag('js', new Date()); gtag('config', id);
  })();
</script>
</body>
</html>
