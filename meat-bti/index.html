<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Meat BTI è¨ºæ–­ï½œè‡ªå·±å®Œçµç‰ˆ</title>
<meta name="theme-color" content="#0b0e17">
<style>
:root{
  --bg:#0b0e17; --panel:#121828; --panel2:#0f1524; --ink:#e9eef8; --muted:#98a2b3; --line:#1f2b49;
  --blueDeep:#1e3a8a; --blue:#2563eb; --yellow:#facc15; --red:#ef4444; --redDeep:#7f1d1d;
}
*{box-sizing:border-box}
body{margin:0;background:radial-gradient(1200px 700px at 50% -10%,#111a30 0%,#0b0e17 60%);color:var(--ink);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif}
a{color:inherit;text-decoration:none}

/* top */
.topbar{position:sticky;top:0;z-index:10;background:rgba(11,14,23,.85);backdrop-filter:blur(6px);border-bottom:1px solid var(--line)}
.container{width:min(980px,94vw);margin:0 auto;padding:14px 0 80px}
.brand{display:flex;align-items:center;gap:10px;font-weight:900;padding:8px 0}
.badge{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;background:conic-gradient(from 140deg,#ffd166,#ff6b4a);color:#0e0b07}
.ghost{margin-left:auto;padding:8px 12px;border:1px solid var(--line);border-radius:10px;color:var(--muted)}

/* hero */
.hero{
  width:min(980px,94vw);margin:10px auto 14px;border-radius:18px;overflow:hidden;border:1px solid var(--line);
  box-shadow:0 16px 36px rgba(0,0,0,.35);background:#000;
}
.hero img{display:block;width:100%;height:auto}

/* panels & buttons */
.panel{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--line);border-radius:16px}
.p16{padding:16px}
.h1{font-size:clamp(22px,4.6vw,34px);font-weight:900;margin:0 0 8px}
.lead{color:var(--muted);margin:0 0 14px}
.btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.btn{appearance:none;border:1px solid var(--line);background:#141b31;color:var(--ink);padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
.btn.primary{background:linear-gradient(180deg,#ffd166,#f9c23c);color:#332100;border:none}
.btn.slim{padding:8px 12px}

/* steps */
.step{display:none}
.step.active{display:block}

/* type grid */
.grid12{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
@media(min-width:800px){.grid12{grid-template-columns:repeat(4,1fr)}}
.card{background:#0f1527;border:1px solid var(--line);border-radius:14px;padding:12px;display:flex;gap:10px}
.card img{width:60px;height:60px;object-fit:contain;border-radius:12px;background:#0c1325;border:1px solid var(--line)}
.card b{display:block}
.small{font-size:12px;color:#a9b5cc}

/* quiz */
.progress{height:8px;background:#0e1426;border:1px solid var(--line);border-radius:999px;overflow:hidden}
.progress .fill{height:100%;background:linear-gradient(90deg,#66d2ff,#7aa2ff,#9b87f5);width:0%}

.qbox{background:#0f1527;border:1px solid var(--line);border-radius:14px;padding:14px}
.qtitle{font-weight:900;margin:0 0 10px}
.abline{display:flex;align-items:center;justify-content:space-between;font-weight:700;color:#cbd5e1;margin-bottom:8px}
.scale{display:flex;align-items:center;gap:14px;justify-content:center}
.dot{
  width:44px;height:44px;border-radius:999px;border:2px solid rgba(255,255,255,.12);
  box-shadow:0 6px 16px rgba(0,0,0,.35);cursor:pointer;transition:transform .05s ease,opacity .2s ease,filter .2s ease;
}
.dot:active{transform:scale(.96)}
.a2{background:radial-gradient(40% 40% at 35% 30%,#3757c7 0%,#1f3b8c 60%);border-color:rgba(83,130,255,.35)}
.a1{background:radial-gradient(40% 40% at 35% 30%,#5da1ff 0%,#2563eb 60%);border-color:rgba(93,161,255,.35)}
.mid{background:radial-gradient(40% 40% at 35% 30%,#ffe88a 0%,#facc15 65%);border-color:rgba(250,204,21,.45)}
.b1{background:radial-gradient(40% 40% at 35% 30%,#ff8b8b 0%,#ef4444 60%);border-color:rgba(255,120,120,.35)}
.b2{background:radial-gradient(40% 40% at 35% 30%,#b94141 0%,#7f1d1d 60%);border-color:rgba(230,90,90,.35)}

.sel{outline:3px solid rgba(122,162,255,.55)}
.choice.chosen .dot:not(.sel){opacity:.35;filter:saturate(.6)} /* æœªé¸æŠã‚’è–„ã */

/* result */
.row{display:grid;grid-template-columns:1fr;gap:14px}
@media(min-width:880px){.row{grid-template-columns:1.2fr .8fr}}
.heroR{display:grid;grid-template-columns:auto 1fr;gap:16px;align-items:center}
.heroR img{width:120px;height:120px;border-radius:20px;background:#0d1324;object-fit:contain;border:1px solid var(--line)}
.badge2{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#151c32;color:#cbd5e1;font-weight:700}
.bars{display:grid;gap:10px}
.bar{display:grid;grid-template-columns:160px 1fr;gap:10px;align-items:center}
.track{height:10px;background:#0e1426;border:1px solid var(--line);border-radius:999px;overflow:hidden}
.fill{height:100%;background:linear-gradient(90deg,#66d2ff,#7aa2ff,#9b87f5);width:0%}
.pair{display:flex;gap:12px;align-items:center}
.pair img{width:72px;height:72px;object-fit:contain;border-radius:14px;border:1px solid var(--line);background:#0d1324}

footer{border-top:1px solid var(--line);color:var(--muted);text-align:center;padding:22px 0;margin-top:28px}
</style>
</head>
<body>
<div class="topbar">
  <div class="container" style="display:flex;align-items:center;gap:12px">
    <div class="brand"><div class="badge">ğŸ¥©</div><div>Meat BTI</div></div>
    <a class="ghost" href="../">â† LPã¸æˆ»ã‚‹</a>
  </div>
</div>

<!-- HERO -->
<figure class="hero"><img src="hero_meatbti.png" alt="Meat BTI"></figure>

<div class="container">

  <!-- STEP 0: ã‚¿ã‚¤ãƒ—ç´¹ä»‹ -->
  <section id="step0" class="step active panel p16">
    <h1 class="h1">ã‚ãªãŸã¯ã©ã®â€œéƒ¨ä½ã‚¿ã‚¤ãƒ—â€ï¼Ÿ</h1>
    <p class="lead">12ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‹ã‚‰ã€ä¸€ç•ªè¿‘ã„ã‚¿ã‚¤ãƒ—ã¨ç›¸æ€§No.1ã‚’åˆ¤å®šã—ã¾ã™ï¼ˆ20å•ãƒ»æ‰€è¦1ã€œ2åˆ†ï¼‰ã€‚</p>
    <div id="typeGrid" class="grid12"></div>
    <div class="btns">
      <button class="btn primary" id="startBtn">è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹</button>
    </div>
  </section>

  <!-- STEP 1: ã‚¯ã‚¤ã‚ºï¼ˆ1åˆ—è¡¨ç¤ºã€5å•Ã—4ãƒšãƒ¼ã‚¸ï¼‰ -->
  <section id="step1" class="step panel p16">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
      <b id="pp">Q1â€“5 / 20</b>
      <div class="progress" style="flex:1"><div id="progFill" class="fill" style="width:0%"></div></div>
      <span style="font-size:12px;color:#a9b5cc">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼š1ã€œ5</span>
    </div>
    <div id="qwrap" style="display:grid;gap:12px"></div>
  </section>

  <!-- STEP 2: çµæœ -->
  <section id="step2" class="step">
    <div class="row">
      <section class="panel p16">
        <div class="heroR">
          <img id="heroImg" alt="">
          <div>
            <div class="badge2">ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—</div>
            <h2 id="typeName" class="h1" style="margin-top:6px"></h2>
            <p id="typeCatch" class="lead" style="margin-top:-6px"></p>
            <p id="typeDetail" style="line-height:1.9;margin:8px 0 12px"></p>
            <div class="btns">
              <button class="btn primary" id="againBtn">ã‚‚ã†ä¸€åº¦è¨ºæ–­</button>
              <a class="btn" href="../">LPã¸æˆ»ã‚‹</a>
            </div>
          </div>
        </div>
        <hr style="border:none;border-top:1px solid var(--line);margin:16px 0">
        <h3>ã‚ãªãŸã®å‘³è¦šãƒ»ã‚¹ã‚¿ã‚¤ãƒ«å‚¾å‘</h3>
        <div id="bars" class="bars"></div>
        <p class="small">å°ºåº¦ï¼š0ï¼ˆå·¦å¯„ã‚Šï¼‰ã€œ 100ï¼ˆå³å¯„ã‚Šï¼‰ã€‚<br>
          é¢¨å‘³Aï¼šèµ¤èº«å¯„ã‚Š â†”ï¸ æ¿ƒåšå¯„ã‚Šï¼é‡Bï¼šè»½ã‚ â†”ï¸ ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ãƒ†ãƒ³ãƒCï¼šé™ã‹ â†”ï¸ ã«ãã‚„ã‹ï¼æ¼”å‡ºDï¼šç´ æœ´ â†”ï¸ æ˜ ãˆã€‚</p>
      </section>

      <aside class="panel p16">
        <h3>ç›¸æ€§ No.1</h3>
        <div class="pair" style="margin-bottom:10px">
          <img id="pairImg" alt="">
          <div>
            <b id="pairName">-</b>
            <div id="pairWhy" class="small" style="margin-top:4px">-</div>
          </div>
        </div>
        <hr style="border:none;border-top:1px solid var(--line);margin:16px 0">
        <h3>è¿‘ã„ã‚¿ã‚¤ãƒ—ï¼ˆæ¬¡ç‚¹ï¼‰</h3>
        <div class="pair">
          <img id="secondImg" alt="">
          <div>
            <b id="secondName">-</b>
            <div class="small" style="margin-top:4px">å‘³è¦šãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ãŒè¿‘ã„â€œä¼¼ã¦ã‚‹ç›¸æ‰‹â€ã€‚</div>
          </div>
        </div>
      </aside>
    </div>
  </section>

  <!-- ã‚¨ãƒ©ãƒ¼ -->
  <section id="err" class="panel p16" style="display:none">
    <b style="color:#ffb4a2">è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</b>
    <p class="small">ã“ã®ç”»é¢ãŒå‡ºã‚‹å ´åˆã¯ã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚</p>
    <div class="btns"><button class="btn primary" onclick="go(0)">è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹</button></div>
  </section>
</div>

<footer>Â© 2025 Meat BTI</footer>

<script>
/* ====== ç”»åƒãƒ‘ã‚¹ ====== */
const IMGS = {
  "ãƒ’ãƒ¬ç”·çˆµ":"hire.png","ã‚¿ãƒ³éšŠé•·":"tan.png","ã‚¤ãƒãƒœãƒãƒ":"ichibo.png","ãƒ©ãƒ³ãƒ—åšå£«":"ranpu.png",
  "ãƒªãƒ–ãƒ­ãƒ¼ã‚¹ãƒœã‚¹":"riburo-su.png","ã‚µãƒ¼ãƒ­ã‚¤ãƒ³ç‹":"sa-roin.png","ç¾é£Ÿå®¶ã‚¶ãƒ–ãƒˆãƒ³":"zabuton.png",
  "ã‚®ãƒ£ãƒ«ã‚«ãƒ«ãƒ“":"karubi.png","ã‚„ã‚Šæ‰‹ã®å–¶æ¥­ãƒãƒ³ãƒãƒ©ãƒŸ":"harami.png","ã‚«ã‚¤ãƒãƒŸèˆå¦“ã¯ã‚“":"kainomi.png",
  "æ›¸é“å®¶ãƒŸã‚¹ã‚¸":"misuji.png","ã‚·ãƒ£ãƒˆãƒ¼ãƒ–ãƒªã‚¢ãƒ³å¥³ç‹":"shato-.png"
};

/* ====== 12ã‚¿ã‚¤ãƒ—å®šç¾©ï¼ˆåº§æ¨™ v:[A,B,C,D], one/catch/detailï¼‰ ====== */
const TYPES = {
  "ãƒ’ãƒ¬ç”·çˆµ":{v:[-1.5,-1.0,-0.5,-0.5], one:"é™ã‹ãªä¸»å½¹ã®èµ¤èº«æ´¾", catch:"ç„¡é§„ãªãä¸Šå“ã€èŠ¯ãŒå¼·ã„èµ¤èº«æ´¾ã€‚",
    detail:"ãƒ’ãƒ¬ç”·çˆµã¯ã€é›‘å‘³ã®ãªã„èµ¤èº«ã®æ—¨ã¿ã«ä¾¡å€¤ã‚’ç½®ãâ€œé™ã‹ãªä¸»å½¹â€ã€‚å¸­ã§ã¯ç©ºæ°—ã‚’èª­ã¿ã€å¿…è¦ååˆ†ãªè¨€è‘‰ã§å ´ã‚’æ•´ãˆã¾ã™ã€‚å®šç•ªã®å¡©ãƒ»æ§ãˆã‚ã®ç«å…¥ã‚Œã‚’å¥½ã¿ã€é‡ã‚ˆã‚Šè³ªã‚’é‡è¦–ã€‚å‹¢ã„ã§é ¼ã¿ã™ããšã€ç· ã‚ã‚‚è»½ã‚ã§ä½™ç™½ã‚’æ®‹ã™ã®ãŒæµå„€ã§ã™ã€‚æ´¾æ‰‹ã•ã¯æ±‚ã‚ã¾ã›ã‚“ãŒã€ç›¸æ‰‹ã®å¥½ã¿ã‚’æ‹¾ã£ã¦æ¬¡ã®ä¸€çš¿ã«åæ˜ ã™ã‚‹ç¹Šç´°ã•ã¯æŠœç¾¤ã€‚ã‚¯ã‚ªãƒªãƒ†ã‚£ãŒä¸ŠãŒã‚‹ã»ã©æº€è¶³åº¦ãŒä¼¸ã³ã€è½ã¡ç€ã„ãŸä¼šã§æœ¬é ˜ã‚’ç™ºæ®ã—ã¾ã™ã€‚"},
  "ã‚¿ãƒ³éšŠé•·":{v:[-1.0,-0.5,0.6,-0.2], one:"å ´ã‚’ã»ãã™ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼", catch:"ç©ºæ°—ã‚’ã»ãã™åˆ‡ã‚Šè¾¼ã¿éšŠé•·ã€‚",
    detail:"ã‚¿ãƒ³éšŠé•·ã¯ã€å ´ã‚’æ¸©ã‚ã‚‹â€œæœ€åˆã®ä¸€æ‰‹â€ãŒå¾—æ„ã€‚ã‚­ãƒ¬ã®ã‚ã‚‹å‘³ã‚ã„ã¨è»½å¿«ãªãƒ†ãƒ³ãƒã§ã€ä¼šè©±ã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’å§‹å‹•ã•ã›ã¾ã™ã€‚ã‚¿ãƒ³å¡©â†’èµ¤èº«ã®é»„é‡‘ãƒ«ãƒ¼ãƒˆã§é€²è¡Œã—ã€ã‚·ã‚§ã‚¢ã®ã•ã˜åŠ æ¸›ã‚‚ä¸Šæ‰‹ã€‚æ¼”å‡ºã‚ˆã‚Šã‚‚ãƒ†ãƒ³ãƒé‡è¦–ã§ã€å†™çœŸã‚ˆã‚Šä½“é¨“ã‚’å„ªå…ˆã€‚èª°ã‹ãŒè¿·ã£ã¦ã„ã‚Œã°ã‚µãƒƒã¨ææ¡ˆã—ã€æ¬¡ã®ä¸€çš¿ã¾ã§ã®â€œé–“â€ã‚’ä½œã‚‰ãªã„ã®ãŒç¾ç‚¹ã€‚é£²ã¿ã™ãã«ã¯æ³¨æ„ã—ã¤ã¤ã€çµ‚å§‹ãƒ•ãƒ©ãƒƒãƒˆã§å¿ƒåœ°ã‚ˆã„é›°å›²æ°—ã‚’ä¿ã¦ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚"},
  "ã‚¤ãƒãƒœãƒãƒ":{v:[-0.5,-0.2,0.0,-0.2], one:"é€šå¥½ã¿ã®èª¿å’Œå½¹", catch:"é€šå¥½ã¿ã®èª¿å’Œå½¹ã€‚",
    detail:"ã‚¤ãƒãƒœãƒãƒã¯ã€èµ¤èº«ã¨ã‚³ã‚¯ã®â€œã¡ã‚‡ã†ã©ã„ã„é–“â€ã‚’æ¢ã™èª¿æ•´å½¹ã€‚ç›¸æ‰‹ã®å¥½ã¿ã‚’èãå‡ºã™ã®ãŒä¸Šæ‰‹ãã€æ¯”è¼ƒé£Ÿã¹ã§ä¼šè©±ã‚’è‡ªç„¶ã«ç”Ÿã¿å‡ºã—ã¾ã™ã€‚ç«å…¥ã‚Œã¯æ§ãˆã‚ã€å‘³ä»˜ã‘ã¯ã¾ãšå¡©ã‹ã‚‰ã€‚é‡ããªã‚Šã™ããªã„é‡æ„Ÿã‚’ä¿ã¡ãªãŒã‚‰æº€è¶³ã‚’ç©ã¿ä¸Šã’ã€ç· ã‚ã¯è»½ã‚ã§æ¬¡å›ã«ã¤ãªãŒã‚‹ä½™ç™½ã‚’æ®‹ã™ã®ãŒæµå„€ã€‚çªå‡ºã—ãŸæ´¾æ‰‹ã•ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€èª°ã¨ã§ã‚‚å¿ƒåœ°ã‚ˆã„è·é›¢ã§æ¥½ã—ã‚ã‚‹â€œé€šå¥½ã¿ã®ãƒãƒ©ãƒ³ã‚µãƒ¼â€ã§ã™ã€‚"},
  "ãƒ©ãƒ³ãƒ—åšå£«":{v:[-0.8,-0.5,0.0,0.2], one:"å°ã•ãªå†’é™ºå®¶", catch:"å®šç•ªã‚’æ›´æ–°ã™ã‚‹å·¥å¤«å¥½ãã€‚",
    detail:"ãƒ©ãƒ³ãƒ—åšå£«ã¯ã€ç‹é“ã«ã²ã¨åŒ™ã®æ–°ã—ã•ã‚’æ·»ãˆã‚‹â€œç©ã‚„ã‹ãªå†’é™ºå®¶â€ã€‚ãƒ™ãƒ¼ã‚¹ã¯èµ¤èº«å¯„ã‚Šã§ã™ãŒã€æ°—ã«ãªã‚‹å‰µä½œã‚’å°‘é‡ãšã¤è©¦ã—ã¦ä¼šè©±ã®ç¨®ã‚’è‚²ã¦ã¾ã™ã€‚ç„¼ãã¯è¦³å¯Ÿé‡è¦–ã§ã€é¦™ã‚Šã‚„ç«å…¥ã‚Œã®é•ã„ã‚’æ¥½ã—ã‚€ç†ç³»è‚Œã€‚å†™çœŸã¯æœ€å°é™ã€ä½“é¨“ã¨è©±é¡Œã¥ãã‚Šã‚’å„ªå…ˆã—ã¾ã™ã€‚ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯æ§ãˆã‚ã«çš¿æ•°ã§æº€è¶³ã‚’ç¨¼ãã®ãŒå¾—æ„ã€‚å ´ã®ç©ºæ°—ã‚’ä¹±ã•ãšã€å¥½å¥‡å¿ƒã‚’è‡ªç„¶ã«å…±æœ‰ã§ãã‚‹äººã§ã™ã€‚"},
  "ãƒªãƒ–ãƒ­ãƒ¼ã‚¹ãƒœã‚¹":{v:[0.8,0.6,0.2,0.2], one:"å®‰å¿ƒæ„Ÿã®ãƒªãƒ¼ãƒ€ãƒ¼", catch:"ç‹é“ãƒªãƒƒãƒã§æº€è¶³åº¦é‡è¦–ã€‚",
    detail:"ãƒªãƒ–ãƒ­ãƒ¼ã‚¹ãƒœã‚¹ã¯ã€æ®µå–ã‚Šè‰¯ãâ€œæº€è¶³ã‚’ç´„æŸã™ã‚‹â€é ¼ã‚Œã‚‹å¹¹äº‹ã€‚åç‰©ã‹ã‚‰åç‰©ã¸ã¨ç¶ºéº—ã«ã¤ãªãã€ä¼šè¨ˆã‚„å¸­æ›¿ãˆã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã€‚é¦™ã‚Šã‚„ã‚½ãƒ¼ã‚¹ã®æ¼”å‡ºã‚‚ç¨‹ã‚ˆãå–ã‚Šå…¥ã‚Œã¦ã€ä½“é¨“æ¿ƒåº¦ã‚’é«˜ã‚ã¾ã™ã€‚å†™çœŸã¯å°‘ãªã‚ã§ã‚‚æ€ã„å‡ºã¯æ¿ƒã„ã€‚é‡æ„Ÿã¯ã‚„ã‚„ã—ã£ã‹ã‚Šã‚ã§ã€æº€è¶³æ´¾ã«ã‚‚å®‰å¿ƒã€‚èµ¤èº«æ´¾ã«ã¯åˆé–“ã«è»½ã„ä¸€çš¿ã‚’å·®ã—è¾¼ã¿ã€å…¨å“¡ã®æº€è¶³åº¦ã‚’åº•ä¸Šã’ã§ãã‚‹çµ±ç‡åŠ›ãŒé­…åŠ›ã§ã™ã€‚"},
  "ã‚µãƒ¼ãƒ­ã‚¤ãƒ³ç‹":{v:[1.3,0.8,0.5,0.8], one:"è¯ã‚„ãã®æ¼”å‡ºå®¶", catch:"è¯ã‚„ã‹æ¼”å‡ºã§å ´ã®ä¸­å¿ƒã«ã€‚",
    detail:"ã‚µãƒ¼ãƒ­ã‚¤ãƒ³ç‹ã¯ã€é¦™ã‚Šãƒ»è„‚ãƒ»è¦‹ã›å ´ã‚’å·§ã¿ã«æ“ã‚‹â€œè¯ã‚„ã‹ãªæ¼”å‡ºå®¶â€ã€‚ä¹¾æ¯ã®éŸ³é ­ã‹ã‚‰ãƒ•ãƒ©ãƒ³ãƒ™ã®ç¬é–“ã¾ã§ã€æ¥½ã—ã„ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’é€ƒã—ã¾ã›ã‚“ã€‚å‘³ã‚ã„ã¯ã‚³ã‚¯å¯„ã‚Šã€é‡ã‚‚ã—ã£ã‹ã‚Šã€‚å†™çœŸã‚„ã‚·ã‚§ã‚¢ã‚‚å¾—æ„ã§ã€åˆå¯¾é¢ã®å¸­ã§ã‚‚æ˜ã‚‹ãå ´ã‚’ã¾ã¨ã‚ã¾ã™ã€‚é‡ã•ãŒæ°—ã«ãªã‚‹ç›¸æ‰‹ã«ã¯å¡©ã®è»½çš¿ã‚’æŒŸã¿ã€æœ€å¾Œã¾ã§ãƒ†ãƒ³ãƒã‚ˆãå¼•ã£å¼µã‚‹ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã‚‚ã€‚è¨˜æ†¶ã«æ®‹ã‚‹å¤œã‚’ä½œã‚‹ä¸­å¿ƒäººç‰©ã§ã™ã€‚"},
  "ç¾é£Ÿå®¶ã‚¶ãƒ–ãƒˆãƒ³":{v:[1.0,0.2,-0.3,0.2], one:"ã—ã£ã¨ã‚Šæ¿ƒåšæ´¾", catch:"ã—ã£ã¨ã‚Šæ¿ƒåšã€å°‘é‡é«˜æº€è¶³ã€‚",
    detail:"ç¾é£Ÿå®¶ã‚¶ãƒ–ãƒˆãƒ³ã¯ã€é‡ã‚ˆã‚Šä½“é¨“ã®æ·±ã•ã‚’æ±‚ã‚ã‚‹â€œå¤§äººã®æ¿ƒåšæ´¾â€ã€‚å£ã©ã‘ã®è‰¯ã„è„‚ã¨é¦™ã‚Šã®ä½™éŸ»ã‚’å°‘é‡ã§ä¸å¯§ã«å‘³ã‚ã„ã¾ã™ã€‚ä¼šè©±ã¯è½ã¡ç€ãã€å¸­ã®å±…å¿ƒåœ°ã‚„æ¸©åº¦æ„Ÿã«ã‚‚æ•æ„Ÿã€‚å†™çœŸã¯æ§ãˆã‚ã§ã€è¨˜æ†¶ã«æ®‹ã‚‹ä¸€å£ã«é›†ä¸­ã—ã¾ã™ã€‚é‡ããªã‚Šã™ããªã„ã‚ˆã†ä¼‘ã¾ã›æ™‚é–“ã‚’å–ã‚Šã€ç· ã‚ã¯è»½ãã€‚æ¿ƒåšå¥½ãã®æº€è¶³åº¦ã‚’æœ€å¤§åŒ–ã—ã¤ã¤ã€ç›¸æ‰‹ã®ãƒšãƒ¼ã‚¹ã«ã‚‚å¯„ã‚Šæ·»ãˆã‚‹ä½™è£•ãŒé­…åŠ›ã§ã™ã€‚"},
  "ã‚®ãƒ£ãƒ«ã‚«ãƒ«ãƒ“":{v:[1.2,0.7,0.9,0.9], one:"å·»ãè¾¼ã¿å‹ã‚¨ãƒ³ã‚¿ãƒ¡", catch:"ç”˜æ¿ƒã‚¨ãƒ³ã‚¿ãƒ¡ã§å·»ãè¾¼ã¿å‹ã€‚",
    detail:"ã‚®ãƒ£ãƒ«ã‚«ãƒ«ãƒ“ã¯ã€å ´ã‚’ä¸€æ°—ã«æ¸©ã‚ã‚‹â€œå·»ãè¾¼ã¿å‹ã‚¨ãƒ³ã‚¿ãƒ¡â€ã€‚ç”˜ã‚ã®ã‚³ã‚¯ã¨åˆ†ã‹ã‚Šã‚„ã™ã„æº€è¶³æ„Ÿã§ã€ã¿ã‚“ãªã®å¿ƒæ‹ã‚’ãã£ã¨ä¸Šã’ã¾ã™ã€‚å†™çœŸã‚„ã‚·ã‚§ã‚¢ã‚‚å¾—æ„ã§ã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆãŒã†ã¾ã„ã‚¿ã‚¤ãƒ—ã€‚é‡ã¯ã—ã£ã‹ã‚Šã‚ã§ã™ãŒã€åˆé–“ã®è»½çš¿ã‚„ã‚µã‚¤ãƒ‰ã§ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã‚‚å¯èƒ½ã€‚è³‘ã‚„ã‹ãªå¸­ã§çœŸä¾¡ã‚’ç™ºæ®ã—ã€åˆå¯¾é¢ã©ã†ã—ã®è·é›¢ã‚’ä¸€æ°—ã«ç¸®ã‚ã¾ã™ã€‚"},
  "ã‚„ã‚Šæ‰‹ã®å–¶æ¥­ãƒãƒ³ãƒãƒ©ãƒŸ":{v:[0.2,0.4,0.8,0.3], one:"ãƒ†ãƒ³ãƒã®å¸ä»¤å¡”", catch:"ãƒ†ãƒ³ãƒè‰¯ãçµæœã‚’å‡ºã™å®Ÿåˆ©æ´¾ã€‚",
    detail:"ã‚„ã‚Šæ‰‹ã®å–¶æ¥­ãƒãƒ³ãƒãƒ©ãƒŸã¯ã€ãƒ†ãƒ³ãƒã¨æ®µå–ã‚Šã®åæ‰‹ã€‚èµ¤èº«ãƒ™ãƒ¼ã‚¹ã§å›è»¢ã‚’ä¸Šã’ã€è¿·ã„æ™‚é–“ã‚’ä½œã‚‰ãšã«æº€è¶³ã¸å°ãã¾ã™ã€‚ç„¼ãå°ç®¡ç†ã‚„é…è†³ã®é‡‡é…ãŒã†ã¾ãã€ä¼šè©±ã®åœæ»ã‚’è¨±ã—ã¾ã›ã‚“ã€‚é‡ã¯å¿…è¦ååˆ†ã€æ¼”å‡ºã¯æ§ãˆã‚ã§ã‚‚ä½“é¨“ã¯æ¿ƒã„ã€‚å†™çœŸã¯æœ€å°é™ã§ã€å¸°ã‚Šéš›ã®æº€è¶³æ„Ÿã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚é£²ã¿ã™ãã ã‘æ³¨æ„ã™ã‚Œã°ã€èª°ã¨ã§ã‚‚å¿ƒåœ°ã‚ˆãæ¥½ã—ã‚ã‚‹å¸ä»¤å¡”ã§ã™ã€‚"},
  "ã‚«ã‚¤ãƒãƒŸèˆå¦“ã¯ã‚“":{v:[0.5,-0.2,0.2,0.2], one:"è»½ãƒªãƒƒãƒã®ã‚³ãƒ¼ãƒ‡", catch:"è»½ã‚„ã‹æ´¾ã®æ©‹æ¸¡ã—ã€‚",
    detail:"ã‚«ã‚¤ãƒãƒŸèˆå¦“ã¯ã‚“ã¯ã€è»½ã‚„ã‹ãªèµ¤èº«å¥½ãã¨æ¿ƒåšæ´¾ã®â€œæ©‹æ¸¡ã—å½¹â€ã€‚è„‚ã¯ä¸Šå“ã«ã€å¡©ã¨ã‚¿ãƒ¬ã®åˆ‡ã‚Šæ›¿ãˆã§æº€è¶³ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã—ã¾ã™ã€‚é‡ã¯ä¸­åº¸ã€ç· ã‚ã¯æ§ãˆã‚ã€‚ä¼šè©±ã¯æŸ”ã‚‰ã‹ãã€ç›¸æ‰‹ã®å¾—æ„åˆ†é‡ã‚’å¼•ãå‡ºã™ã®ãŒä¸Šæ‰‹ã€‚é‡ããªã‚ŠãŒã¡ãªå¸­ã«ã‚‚é¢¨ã‚’å…¥ã‚Œã€æœ€å¾Œã¾ã§æ°—æŒã¡ã‚ˆãé£Ÿã¹åˆ‡ã‚‰ã›ã‚‹ã‚³ãƒ¼ãƒ‡åŠ›ãŒé­…åŠ›ã§ã™ã€‚"},
  "æ›¸é“å®¶ãƒŸã‚¹ã‚¸":{v:[0.4,-0.4,-0.5,0.2], one:"ç¹Šç´°ã•ã®è·äºº", catch:"å£ã©ã‘ä¸Šå“ã€æ‰€ä½œã§é­…ã›ã‚‹ã€‚",
    detail:"æ›¸é“å®¶ãƒŸã‚¹ã‚¸ã¯ã€ç¹Šç´°ãªå£ã©ã‘ã¨æ‰€ä½œã®ç¾ã—ã•ã‚’æ„›ã™ã‚‹â€œè·äººæ°—è³ªâ€ã€‚ç«å…¥ã‚Œã¯æ§ãˆã‚ã§ã€çš¿ã®æ¸©åº¦ã‚„åˆ‡ã‚Šå£ã«ã‚‚æ°—ã‚’é…ã‚Šã¾ã™ã€‚é‡ã¯å°‘ãªã‚ã€ä¼šè©±ã¯ç©ã‚„ã‹ã€‚å†™çœŸã¯è¨˜éŒ²ç¨‹åº¦ã§ã€ä½“é¨“ã®ä½™éŸ»ã‚’é‡è¦–ã—ã¾ã™ã€‚ç”˜ã‚ã¯ã‚¢ã‚¯ã‚»ãƒ³ãƒˆç¨‹åº¦ã«ç•™ã‚ã¤ã¤ã€é¦™ã‚Šã‚„ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®é•ã„ã§æ¥½ã—ã‚€ã®ãŒæµå„€ã€‚ä¸å¯§ãªå ´ã¥ãã‚Šã§ç›¸æ‰‹ã®æº€è¶³æ„Ÿã‚’ quietly é«˜ã‚ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚"},
  "ã‚·ãƒ£ãƒˆãƒ¼ãƒ–ãƒªã‚¢ãƒ³å¥³ç‹":{v:[-1.3,-0.2,-0.6,0.4], one:"å¯¡é»™ãªå¯©ç¾å®¶", catch:"ç‰¹é¸ä¸€ç‚¹ä¸»ç¾©ã€‚é™ã‹ã«æ·±ãã€‚",
    detail:"ã‚·ãƒ£ãƒˆãƒ¼ãƒ–ãƒªã‚¢ãƒ³å¥³ç‹ã¯ã€é‡ã‚ˆã‚Šè³ªã‚’æ¥µã‚ã‚‹â€œå¯¡é»™ãªå¯©ç¾å®¶â€ã€‚ä¸€ç‚¹ä¸»ç¾©ã§ã€æœ€è‰¯ã®ä¸€çš¿ã«é›†ä¸­ã—ã¾ã™ã€‚ç«å…¥ã‚Œãƒ»é¦™ã‚Šãƒ»ä¼‘ã¾ã›æ™‚é–“ã¾ã§å¦¥å”ã—ãªã„ä»£ã‚ã‚Šã€çš¿æ•°ã¯å°‘ãªã‚ã€‚ä¼šè©±ã¯é™ã‹ã§ã€å¸­ã¯è½ã¡ç€ã„ãŸå ´æ‰€ã‚’å¥½ã‚€å‚¾å‘ã€‚ç”˜ã‚ã‚„æ¼”å‡ºã¯æ§ãˆã‚ã§ã‚‚ã€ä½“é¨“ã®å¯†åº¦ã¯åœ§å€’çš„ã€‚ç›¸æ‰‹ã®å¥½ã¿ã‚’å°Šé‡ã—ã€ã»ã©ã‚ˆã„è»½çš¿ã‚’æŒŸã‚ã‚‹ã¨ãƒ™ã‚¹ãƒˆã§ã™ã€‚"}
};

/* ====== è³ªå•ï¼ˆ20å•ï¼šA/B/C/D ã«å¯„ä¸ï¼‰ã€‚æœ€åˆã®5å•ã¯â€œè¢«ã‚Šâ€ã‚’ç²¾æŸ»ã—ã¦å¤‰åŒ–ã‚’æŒãŸã›ã¦ã„ã¾ã™ã€‚ ====== */
const Q = [
  {t:"åŒã˜ä¾¡æ ¼ãªã‚‰ã©ã¡ã‚‰ã‚’é¸ã¶ï¼Ÿ", a:"ã‚­ãƒ¬é‡è¦–ï¼ˆã•ã£ã±ã‚Šï¼‰", b:"ã‚³ã‚¯é‡è¦–ï¼ˆæ¿ƒåšï¼‰", ax:"A"},
  {t:"æº€è¶³åº¦é‡è¦–ãªã‚‰ï¼Ÿ", a:"ãƒ’ãƒ¬ãƒ»ãƒ©ãƒ³ãƒ—ãªã©èµ¤èº«", b:"ãƒªãƒ–ãƒ­ãƒ¼ã‚¹ãƒ»ã‚µãƒ¼ãƒ­ã‚¤ãƒ³", ax:"A"},
  {t:"è„‚ã®é‡ã•ã®å¥½ã¿ã¯ï¼Ÿ", a:"è»½ã‚ã®èµ¤èº«å¯„ã‚Š", b:"è„‚ã®æ¿ƒåšã•ã‚‚æ¬²ã—ã„", ax:"A"},
  {t:"â€œé‡ã‚’ã—ã£ã‹ã‚Šâ€é£Ÿã¹ã‚‹ãªã‚‰ï¼Ÿ", a:"è»½ã‚ã®èµ¤èº«ä¸­å¿ƒã§é€²ã‚ãŸã„", b:"æº€è¶³æ„Ÿã®é«˜ã„éƒ¨ä½ã§æŠ¼ã—ãŸã„", ax:"B"},
  {t:"ãƒœãƒªãƒ¥ãƒ¼ãƒ æ„Ÿã®ç†æƒ³ã¯ï¼Ÿ", a:"å°‘é‡Ã—å¤šçš¿ã§è‰²ã€…", b:"é‡æ„Ÿã‚ã£ã¦OK", ax:"B"},

  {t:"æœ€åˆã®ä¸€çš¿ã¯ï¼Ÿ", a:"è»½ã‚„ã‹ã«å¡©ã§", b:"æœ€åˆã‹ã‚‰åç‰©ãƒªãƒƒãƒ", ax:"D"},
  {t:"è¿½åŠ ã®ä¸€çš¿ãªã‚‰ï¼Ÿ", a:"èµ¤èº«ç³»ã§ã‚‚ã†ä¸€çš¿", b:"ãƒªãƒƒãƒç³»ã§ã‚‚ã†ä¸€çš¿", ax:"B"},
  {t:"æ¼”å‡ºã®å¥½ã¿ã¯ï¼Ÿ", a:"ç´ æœ´ãƒ»ç´ ææ¨ã—", b:"æ˜ ãˆãƒ»ã‚½ãƒ¼ã‚¹æ¨ã—", ax:"D"},
  {t:"ãƒ†ãƒ¼ãƒ–ãƒ«ã®é›°å›²æ°—ã¯ï¼Ÿ", a:"é™ã‹ã«å‘³ã‚ã†ã®ãŒå¥½ã", b:"è³‘ã‚„ã‹ã«æ¥½ã—ã¿ãŸã„", ax:"C"},
  {t:"åˆã‚ã¾ã—ã¦ã®å¸­ã§ã®ç«‹ã¡å›ã‚Šã¯ï¼Ÿ", a:"ã¾ãšç›¸æ‰‹ã«åˆã‚ã›ã‚‹", b:"æ˜ã‚‹ãä¸»å°ã—ã¦ã„ã", ax:"C"},

  {t:"ç„¼ãåŠ æ¸›ã¯ï¼Ÿ", a:"æ§ãˆã‚ãƒ¬ã‚¢å¯„ã‚Š", b:"é¦™ã°ã—ã‚ãŒå¥½ã¿", ax:"A"},
  {t:"ä¹¾æ¯ãƒ‰ãƒªãƒ³ã‚¯ã¯ï¼Ÿ", a:"è»½ã‚„ã‹/ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°", b:"æ¿ƒã„ã‚/ã‚«ã‚¯ãƒ†ãƒ«", ax:"D"},
  {t:"çš¿æ•°ã®å¿—å‘ã¯ï¼Ÿ", a:"å°‘é‡å¤šçš¿ã§å¤‰åŒ–ã‚’æ¥½ã—ã‚€", b:"ä¸»å½¹ã‚’ãŒã£ã¤ã‚Š", ax:"B"},
  {t:"å†™çœŸã®æ‰±ã„ã¯ï¼Ÿ", a:"å°‘ãªã‚ã§ä½“é¨“é‡è¦–", b:"ã—ã£ã‹ã‚Šæ’®ã£ã¦ã‚·ã‚§ã‚¢", ax:"D"},
  {t:"ä¼šè©±ãƒ†ãƒ³ãƒã¯ï¼Ÿ", a:"ã‚†ã£ãã‚Šä¸å¯§ã«æ·±ã", b:"ãƒ†ãƒ³ãƒè‰¯ãæ˜ã‚‹ã", ax:"C"},

  {t:"é¦™ã‚Šã®å¥½ã¿ã¯ï¼Ÿ", a:"ç´ æã®é¦™ã‚ŠãŒç«‹ã¤æ–¹", b:"é¦™ã‚Šæ¼”å‡ºã‚‚å¥½ã", ax:"D"},
  {t:"ç· ã‚ã®é¸ã³æ–¹ã¯ï¼Ÿ", a:"è»½ãä½™ç™½ã‚’æ®‹ã™", b:"æº€è¶³å„ªå…ˆã§ã—ã£ã‹ã‚Š", ax:"B"},
  {t:"åç‰©ã¨è¨€ã‚ã‚ŒãŸã‚‰ï¼Ÿ", a:"æ°—ã«ãªã‚‹ãŒæ§˜å­è¦‹", b:"ã¾ãšã¯åç‰©ã§ã„ã", ax:"C"},
  {t:"å¥½ã¿ã®å‘³å¹…ã¯ï¼Ÿ", a:"èµ¤èº«ã€œè»½ãƒªãƒƒãƒ", b:"æ¿ƒåšã€œç”˜ã‚ã‚‚OK", ax:"A"},
  {t:"å¸­æ›¿ãˆã®ç†æƒ³ã¯ï¼Ÿ", a:"å°‘ãªã‚ã§ã˜ã£ãã‚Š", b:"å¤šã‚ã§åºƒãäº¤æµ", ax:"C"},
];

/* ====== ä¾¿åˆ©é–¢æ•° ====== */
const qs=s=>document.querySelector(s);
const el=(t,attrs={},html="")=>{const e=document.createElement(t);for(const[k,v] of Object.entries(attrs))e.setAttribute(k,v);e.innerHTML=html;return e;}
const to01=n=>Math.min(1,Math.max(0,(n+2)/4));           // -2..+2â†’0..1
const v5to2=v=>((v||3)-3)/2*2;                            // 1..5â†’-2..+2

/* ====== ç”»é¢é·ç§» ====== */
function go(n){["#step0","#step1","#step2","#err"].forEach(s=>qs(s).classList.remove("active"));
  if(n===0)qs("#step0").classList.add("active"); if(n===1)qs("#step1").classList.add("active"); if(n===2)qs("#step2").classList.add("active");}

/* ====== ã‚¿ã‚¤ãƒ—ä¸€è¦§ ====== */
function renderTypeGrid(){
  const g=qs("#typeGrid"); g.innerHTML="";
  Object.entries(TYPES).forEach(([name,o])=>{
    const c=el("div",{class:"card"});
    c.innerHTML=`<img src="${IMGS[name]||''}" alt="${name}"><div><b>${name}</b><div class="small">${o.one}</div></div>`;
    g.appendChild(c);
  });
}

/* ====== ã‚¯ã‚¤ã‚ºæç”» ====== */
let page=0;               // 0..3
let answers=Array(Q.length).fill(0);

function renderPage(){
  const from=page*5, to=from+5;
  qs("#pp").textContent=`Q${from+1}â€“${to} / 20`;
  const prog=Math.round((answers.filter(Boolean).length/20)*100);
  qs("#progFill").style.width=prog+"%";

  const wrap=qs("#qwrap"); wrap.innerHTML="";
  Q.slice(from,to).forEach((q,i)=>{
    const idx=from+i;
    const box=el("div",{class:"qbox"});
    box.innerHTML=`
      <div class="qtitle">${q.t}</div>
      <div class="small" style="margin-bottom:8px">Aï¼š${q.a}ã€€/ã€€Bï¼š${q.b}</div>
      <div class="abline"><span>A</span><span>B</span></div>
      <div class="scale choice" data-idx="${idx}">
        <button class="dot a2" aria-label="Aã«ã¨ã¦ã‚‚è¿‘ã„"></button>
        <button class="dot a1" aria-label="Aã«è¿‘ã„"></button>
        <button class="dot mid" aria-label="ä¸­ç«‹"></button>
        <button class="dot b1" aria-label="Bã«è¿‘ã„"></button>
        <button class="dot b2" aria-label="Bã«ã¨ã¦ã‚‚è¿‘ã„"></button>
      </div>`;
    wrap.appendChild(box);

    // æ—¢å­˜å›ç­”ã®åæ˜ 
    if(answers[idx]){
      const order=[1,2,3,4,5]; const v=answers[idx]; const btn=box.querySelectorAll(".dot")[order.indexOf(v)];
      btn.classList.add("sel"); box.querySelector(".choice").classList.add("chosen");
    }
  });
}

/* ã‚¯ãƒªãƒƒã‚¯ã§å›ç­”ãƒ»æœªé¸æŠã‚’è–„ããƒ»5å•æƒãˆã°è‡ªå‹•ã§æ¬¡ã¸ */
qs("#qwrap").addEventListener("click",e=>{
  const btn=e.target.closest(".dot"); if(!btn) return;
  const choice=e.target.closest(".choice"); const idx=+choice.dataset.idx;
  const dots=[...choice.querySelectorAll(".dot")];
  dots.forEach(d=>d.classList.remove("sel"));
  btn.classList.add("sel");
  choice.classList.add("chosen");

  // ã©ã®ä½ç½®ã‹â†’ 1..5
  const pos=dots.indexOf(btn)+1;
  answers[idx]=pos;

  // ã“ã®ãƒšãƒ¼ã‚¸ãŒå…¨éƒ¨åŸ‹ã¾ã£ã¦ã„ãŸã‚‰è‡ªå‹•ã§é·ç§»
  const from=page*5; const done=answers.slice(from,from+5).every(v=>v>0);
  setTimeout(()=>{
    if(done){ if(page<3){ page++; renderPage(); window.scrollTo({top:0,behavior:"smooth"});}
              else{ showResult(); } }
    else { // 1ã¤ä¸‹ã®æœªå›ç­”ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ„Ÿ
      const nextIdx=answers.findIndex((v,i)=>i>=from&&i<from+5&&v===0);
      if(nextIdx>=0){ const target=qs(`[data-idx="${nextIdx}"]`); target && target.scrollIntoView({behavior:"smooth",block:"center"}); }
    }
    // é€²æ—ãƒãƒ¼æ›´æ–°
    const prog=Math.round((answers.filter(Boolean).length/20)*100);
    qs("#progFill").style.width=prog+"%";
  },180);
});

/* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ 1..5 å…¥åŠ› */
window.addEventListener("keydown",e=>{
  const n=+e.key; if(!(n>=1&&n<=5) || !qs("#step1").classList.contains("active")) return;
  const from=page*5,to=from+5; let idx=answers.findIndex((v,i)=>i>=from&&i<to&&v===0); if(idx<0) idx=from;
  answers[idx]=n; renderPage();
  const done=answers.slice(from,to).every(v=>v>0);
  if(done) setTimeout(()=>{ if(page<3){page++;renderPage();window.scrollTo({top:0,behavior:"smooth"});} else{showResult();}},150);
});

/* ====== çµæœ ====== */
const AXIS_MAP=Q.map(q=>q.ax);
function buildAxis(){
  const acc={A:[],B:[],C:[],D:[]};
  answers.forEach((v,i)=>acc[AXIS_MAP[i]].push(v5to2(v)));
  const avg=k=>acc[k].reduce((s,x)=>s+x,0)/acc[k].length;
  return {A:avg('A'),B:avg('B'),C:avg('C'),D:avg('D')};
}
function decideType(ax){
  const w={A:1.2,B:1.0,C:0.9,D:0.8};
  let best=null,bestDist=1e9;
  for(const [name,o] of Object.entries(TYPES)){
    const [a,b,c,d]=o.v;
    const dist=w.A*(ax.A-a)**2+w.B*(ax.B-b)**2+w.C*(ax.C-c)**2+w.D*(ax.D-d)**2;
    if(dist<bestDist){bestDist=dist;best=name;}
  } return best;
}
function bestPartner(selfName,ax){
  const w={A:0.8,B:1.0,C:1.2,D:0.9};
  let best=null,score=1e9;
  for(const [name,o] of Object.entries(TYPES)){
    if(name===selfName) continue;
    const [a,b,c,d]=o.v;
    const s=w.A*(ax.A-(-0.4*a))**2 + w.B*(ax.B-b)**2 + w.C*(ax.C-c)**2 + w.D*(ax.D-(-0.3*d))**2;
    if(s<score){score=s;best={name,why:explainPair(ax,o.v)};}
  } return best;
}
function explainPair(ax,v){
  const labsC=Math.abs(ax.C-v[2])<0.5?"ãƒ†ãƒ³ãƒæ„ŸãŒè¿‘ã„":"ãƒ†ãƒ³ãƒã‚’è£œå®Œã—åˆã†";
  const labsB=Math.abs(ax.B-v[1])<0.5?"é‡æ„Ÿã®å¥½ã¿ãŒè¿‘ã„":"é‡æ„Ÿã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã‚‹";
  const labsA=ax.A>0?"æ¿ƒåšå¯„ã‚Š":"èµ¤èº«å¯„ã‚Š";
  return `${labsC}ï¼‹${labsB}ã€‚å¥½ã¿ã¯${labsA}ã‚’è£œå®Œã€‚`;
}
function showBars(ax){
  const bars=qs("#bars"); bars.innerHTML="";
  [["é¢¨å‘³ Aï¼ˆèµ¤èº«â†”æ¿ƒåšï¼‰",to01(ax.A)],
   ["é‡ Bï¼ˆè»½ã‚â†”ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰",to01(ax.B)],
   ["ãƒ†ãƒ³ãƒ Cï¼ˆé™ã‹â†”ã«ãã‚„ã‹ï¼‰",to01(ax.C)],
   ["æ¼”å‡º Dï¼ˆç´ æœ´â†”æ˜ ãˆï¼‰",to01(ax.D)]].forEach(([label,ratio])=>{
     const row=el("div",{class:"bar"});
     row.innerHTML=`<div class="small">${label}</div>
       <div class="track"><div class="fill" style="width:${Math.round(ratio*100)}%"></div></div>`;
     bars.appendChild(row);
   });
}
function showResult(){
  if(answers.filter(Boolean).length<20){qs("#err").style.display='block';return;}
  const ax=buildAxis();
  const you=decideType(ax); const t=TYPES[you];
  // main
  qs("#typeName").textContent=you;
  qs("#typeCatch").textContent=t.catch;
  qs("#typeDetail").textContent=t.detail;
  qs("#heroImg").src=IMGS[you]||""; qs("#heroImg").alt=you;
  // ç›¸æ€§
  const pair=bestPartner(you,ax);
  if(pair){qs("#pairName").textContent=pair.name;qs("#pairImg").src=IMGS[pair.name]||"";qs("#pairImg").alt=pair.name;qs("#pairWhy").textContent=pair.why;}
  // è¿‘ã„ã‚¿ã‚¤ãƒ—ï¼ˆè·é›¢2ä½ï¼‰
  const distances=Object.entries(TYPES).map(([name,o])=>{
    const [a,b,c,d]=o.v; const dist=(ax.A-a)**2+(ax.B-b)**2+(ax.C-c)**2+(ax.D-d)**2; return {name,dist};
  }).sort((x,y)=>x.dist-y.dist);
  const second=distances.find(x=>x.name!==you);
  if(second){qs("#secondName").textContent=second.name;qs("#secondImg").src=IMGS[second.name]||"";qs("#secondImg").alt=second.name;}
  // bars
  showBars(ax);
  go(2); window.scrollTo({top:0,behavior:"smooth"});
}

/* ====== åˆæœŸåŒ– ====== */
renderTypeGrid();
qs("#startBtn").onclick=()=>{ page=0; answers=Array(Q.length).fill(0); renderPage(); go(1); window.scrollTo({top:0,behavior:"smooth"}); }
qs("#againBtn").onclick =()=>{ page=0; answers=Array(Q.length).fill(0); renderPage(); go(1); window.scrollTo({top:0,behavior:"smooth"}); }
</script>
</body>
</html>
